<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Museos de Ecuador - Mapa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Leaflet CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5SXRr9lG0=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100 font-sans flex flex-col min-h-screen">
    <!-- Navbar fijo arriba -->
    <nav class="bg-blue-600 text-white p-4 flex justify-between items-center shadow-md z-10">
        <h1 class="text-2xl font-bold">Museos de Ecuador</h1>
        <ul class="flex space-x-6">
            <li><a href="index.html" class="hover:underline">Home</a></li>
            <li><a href="mapa.html" class="hover:underline">Mapa</a></li>
        </ul>
    </nav>

    <!-- Contenedor principal que crece para llenar la pantalla -->
    <main class="flex-grow flex flex-col">
        <!-- Título (pequeño para no quitar mucho espacio) -->
        <h2 class="text-2xl md:text-3xl font-bold text-center py-4 bg-white shadow-sm">
            Mapa Interactivo de Museos
        </h2>

        <!-- Mapa que ocupa todo el espacio restante -->
        <div id="map" class="flex-grow w-full"></div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Inicializamos el mapa
            var map = L.map('map').setView([-1.8312, -78.1834], 6.5);

            // Capa base de OpenStreetMap
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 19
            }).addTo(map);

            // Museos
            var museums = [
                { name: 'La Capilla del Hombre', lat: -0.1915, lng: -78.4705, desc: 'Arte de Oswaldo Guayasamín - Quito' },
                { name: 'Museo de la Ciudad', lat: -0.2208, lng: -78.5125, desc: 'Historia de Quito - Centro Histórico' },
                { name: 'Casa del Alabado', lat: -0.2213, lng: -78.5158, desc: 'Arte precolombino - Quito' },
                { name: 'Museo Intiñan', lat: -0.0022, lng: -78.4558, desc: 'Línea del Ecuador - Mitad del Mundo' },
                { name: 'Museo Pumapungo', lat: -2.9061, lng: -78.9975, desc: 'Etnográfico y arqueológico - Cuenca' },
                { name: 'Panama Hat Museum', lat: -2.8974, lng: -79.0045, desc: 'Sombreros de paja toquilla - Cuenca' },
                { name: 'MAAC (Museo Antropología y Arte Contemporáneo)', lat: -2.1856, lng: -79.8761, desc: 'Arte y antropología - Guayaquil' },
                { name: 'Museo Los Amantes de Sumpa', lat: -2.2262, lng: -80.8587, desc: 'Sitio arqueológico - Santa Elena' },
                { name: 'Complejo Cultural Fábrica Imbabura', lat: 0.3325, lng: -78.2136, desc: 'Historia textil - Atuntaqui, Imbabura' },
                { name: 'Museo y Centro Cultural de Ibarra', lat: 0.3517, lng: -78.1223, desc: 'Cultura local - Ibarra, Imbabura' }
            ];

            museums.forEach(function(m) {
                L.marker([m.lat, m.lng])
                    .addTo(map)
                    .bindPopup(`<b>${m.name}</b><br>${m.desc}`);
            });

            // Pequeña corrección: forzamos que el mapa se actualice después de cargar
            setTimeout(function() {
                map.invalidateSize();
            }, 300);
        });
    </script>
</body>
</html>
